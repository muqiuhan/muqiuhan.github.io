<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="å«æš®ç§‹">


    <meta name="subtitle" content="æš®ç§‹å°å±‹">


    <meta name="description" content="ä¸å‘ä¸äº¢çš„ç å†œï¼Œ æœ´ç´ çš„æ°‘è°£è¯—äºº">


    <meta name="keywords" content="éŸ©æš®ç§‹,MuqiuHan">




<title>OCaml News 2023/6/11 | æš®ç§‹å°å±‹</title>





<style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+SC:wght@300;400;500;700&family=Roboto+Mono&display=swap');
</style>



    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    




    <!-- scripts list from _config.yml -->
    
    <script src="/js/frame.js"></script>
    




    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>







  <!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head>
  <body>
    <div class="mask-border">
    </div>

    <div class="wrapper">

      <div class="header">
  <div class="flex-container">
    <div class="header-inner">
      <div class="site-brand-container">
        <a href="/">
          
            æš®ç§‹å°å±‹
          
        </a>
      </div>
      <div id="menu-btn" class="menu-btn" onclick="toggleMenu()">
        Menu
      </div>
      <nav class="site-nav">
        <ul class="menu-list">
          
            
              <li class="menu-item">
                <a href="/">ä¸»é¡µ</a>
              </li> 
                   
          
            
              <li class="menu-item">
                <a href="/tags/Technique/">æŠ€æœ¯</a>
              </li> 
                   
          
            
              <li class="menu-item">
                <a href="/Projects">é¡¹ç›®</a>
              </li> 
                   
          
            
              <li class="menu-item">
                <a href="/categories/gallery/">æ—¥è®°æœ¬</a>
              </li> 
                   
          
            
              <li class="menu-item">
                <a href="/about">å…³äº</a>
              </li> 
                   
          
          
        </ul>
      </nav>
    </div>
  </div>
</div>


      <div class="main">
        <div class="flex-container">
          <article id="post">

  
    <div class="post-head">
    <div class="post-info">
        <div class="tag-list">
            
                
                    <span class="post-tag">
                        <a href="/tags/OCaml/">
                            OCaml
                        </a>
                    </span>    
                
                    <span class="post-tag">
                        <a href="/tags/Technique/">
                            Technique
                        </a>
                    </span>    
                           
            
        </div>
        <div class="post-title">
            
            
                OCaml News 2023/6/11
            
            
        </div>
        <span class="post-date">
            Jun 11, 2023
        </span>
    </div>
    <div class="post-img">
        
            <div class="h-line-primary"></div>
              
    </div>
</div>
    <div class="post-content">
    <h1 id="äºŒã€‡äºŒä¸‰å¹´äº”æœˆä¸‰åä¸€æ—¥-äºŒã€‡äºŒä¸‰å¹´å…­æœˆåä¸€æ—¥"><a href="#äºŒã€‡äºŒä¸‰å¹´äº”æœˆä¸‰åä¸€æ—¥-äºŒã€‡äºŒä¸‰å¹´å…­æœˆåä¸€æ—¥" class="headerlink" title="äºŒã€‡äºŒä¸‰å¹´äº”æœˆä¸‰åä¸€æ—¥ - äºŒã€‡äºŒä¸‰å¹´å…­æœˆåä¸€æ—¥"></a>äºŒã€‡äºŒä¸‰å¹´äº”æœˆä¸‰åä¸€æ—¥ - äºŒã€‡äºŒä¸‰å¹´å…­æœˆåä¸€æ—¥</h1><h2 id="Lambdaæ¼”ç®—ä¸­çš„å¯è®¡ç®—æ€§æé™"><a href="#Lambdaæ¼”ç®—ä¸­çš„å¯è®¡ç®—æ€§æé™" class="headerlink" title="Lambdaæ¼”ç®—ä¸­çš„å¯è®¡ç®—æ€§æé™"></a>Lambdaæ¼”ç®—ä¸­çš„å¯è®¡ç®—æ€§æé™</h2><p>OCaml çš„ç”¨æˆ·å¯èƒ½æœ‰å…´è¶£é˜…è¯»æœ‰å…³ lambda æ¼”ç®—çš„ç†è®ºè®ºæ–‡ã€‚</p>
<p>â€œ <a target="_blank" rel="noopener" href="https://hbr.github.io/Lambda-Calculus/computability/text.html">Limits of Computability in Lambda Calculus</a>â€œ è¿™ç¯‡è®ºæ–‡ä»‹ç»äº†åœ¨lambdaæ¼”ç®—ä¸­æœ‰ä¸€äº›å‡½æ•°æ˜¯ä¸å¯è®¡ç®—çš„ã€‚</p>
<p>è¯¦ç»†è®¨è®ºå¯ä»¥çœ‹<a target="_blank" rel="noopener" href="https://discuss.ocaml.org/t/limits-of-computability-in-lambda-calculus/12295">è®ºå›åŸå¸–</a></p>
<h2 id="OCaml-5-1-0-alpha2"><a href="#OCaml-5-1-0-alpha2" class="headerlink" title="OCaml 5.1.0~alpha2"></a>OCaml 5.1.0~alpha2</h2><p>éšç€ OCaml 5.1.0 æŒç»­ç¨³å®šçš„å·¥ä½œè¿›å±•ï¼ŒOCaml 5.1.0 çš„ç¬¬äºŒä¸ª alpha ç‰ˆæœ¬å‘å¸ƒäº†ï¼Œ è¿™ä¸ªç‰ˆæœ¬ä¿®å¤äº†GCå’ŒWindows ABIçš„é—®é¢˜ã€‚<br>é™¤æ­¤ä¹‹å¤–ï¼Œç±»å‹ç³»ç»Ÿå…¼å®¹æ€§å¾—åˆ°å¢å¼º,æ¢å¤æ”¯æŒ s390x&#x2F;IBM Z</p>
<p>è¯¦ç»†çš„æ›´æ–°å¯ä»¥æŸ¥çœ‹ <a target="_blank" rel="noopener" href="https://discuss.ocaml.org/t/second-alpha-release-of-ocaml-5-1-0/12299">è®ºå›åŸå¸–</a></p>
<h2 id="OCamlä¸­èƒ½å¦å®ç°-constraint-ä¸ç­‰"><a href="#OCamlä¸­èƒ½å¦å®ç°-constraint-ä¸ç­‰" class="headerlink" title="OCamlä¸­èƒ½å¦å®ç° constraint ä¸ç­‰"></a>OCamlä¸­èƒ½å¦å®ç° constraint ä¸ç­‰</h2><p>OCamlæä¾›äº†å¯¹ç±»å‹å®šä¹‰æ·»åŠ çº¦æŸçš„æ–¹æ³•ï¼Œ å³<code>constraint</code>:</p>
<figure class="highlight ocaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> <span class="type">A</span> = <span class="keyword">struct</span> <span class="keyword">type</span> t = <span class="built_in">int</span> <span class="keyword">end</span></span><br><span class="line"><span class="keyword">module</span> <span class="type">B</span> = <span class="keyword">struct</span> <span class="keyword">type</span> t = <span class="built_in">float</span> <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">(** Error: This type constructor expands to type t but is used here with type float *)</span></span><br><span class="line"><span class="keyword">type</span> t = <span class="type">A</span>.t <span class="keyword">constraint</span> t = <span class="type">B</span>.t</span><br></pre></td></tr></table></figure>

<p>èƒ½å¦å®ç°åˆ¤æ–­ä¸¤ä¸ªç±»å‹æ˜¯ä¸å…¼å®¹çš„å‘¢ï¼Ÿ æ¯”å¦‚: <code>type t = A.t constraint t &lt;&gt; B.t</code>ã€‚</p>
<p>ç±»å‹ç›¸å…³çš„ç†è®ºåœ¨å­¦äº†åœ¨å­¦äº†å‘œå‘œ,ç›®å‰æ¥çœ‹è¿™ä¸æ˜¯ä¸ªå¥½çš„åšæ³•â€¦ï¼Œè¯¦ç»†å¯ä»¥çœ‹<a target="_blank" rel="noopener" href="https://discuss.ocaml.org/t/type-inequality-constraints/12364#main-container">è®ºå›åŸå¸–</a></p>
<h2 id="åœ¨OCaml5çš„å¹¶è¡Œç¨‹åºä¸­ä½¿ç”¨å…¨å±€å“ˆå¸Œè¡¨æ˜¯å¦å®‰å…¨ï¼Ÿ"><a href="#åœ¨OCaml5çš„å¹¶è¡Œç¨‹åºä¸­ä½¿ç”¨å…¨å±€å“ˆå¸Œè¡¨æ˜¯å¦å®‰å…¨ï¼Ÿ" class="headerlink" title="åœ¨OCaml5çš„å¹¶è¡Œç¨‹åºä¸­ä½¿ç”¨å…¨å±€å“ˆå¸Œè¡¨æ˜¯å¦å®‰å…¨ï¼Ÿ"></a>åœ¨OCaml5çš„å¹¶è¡Œç¨‹åºä¸­ä½¿ç”¨å…¨å±€å“ˆå¸Œè¡¨æ˜¯å¦å®‰å…¨ï¼Ÿ</h2><p>è¿™é‡ŒæŒ‡çš„åº”è¯¥æ˜¯ <code>Stdlib.Hashtbl</code>ã€‚</p>
<p>åªèƒ½å®‰å…¨ä¸€ç‚¹ç‚¹ï¼Œå› ä¸ºå¯¹å“ˆå¸Œè¡¨è®¿é—®æ²¡æœ‰åŒæ­¥,æ‰€ä»¥åªæ˜¯å†…å­˜å®‰å…¨è€Œä¸æ˜¯çº¿ç¨‹å®‰å…¨ã€‚<br>æ–‡æ¡£æŒ‡å‡ºï¼Œå¯¹å“ˆå¸Œè¡¨çš„ä¸åŒæ­¥è®¿é—®æ˜¯ç¨‹åºå‘˜çš„é”…ï¼Œè¦ä¹ˆä½¿ç”¨é”ä¿æŠ¤è¡¨ï¼Œè¦ä¹ˆç”¨å¹¶å‘å“ˆå¸Œè¡¨çš„ä¸åŒå®ç°ã€‚<br>åœ¨è¡¨æ²¡æœ‰æ¶‰åŠå¤§å°è°ƒæ•´æ“ä½œçš„æƒ…å†µä¸‹ï¼Œå…±äº«å“ˆå¸Œè¡¨æ˜¯å®‰å…¨çš„ã€‚åœ¨è°ƒæ•´å¤§å°çš„æƒ…å†µä¸‹ï¼Œæ·»åŠ &#x2F;åˆ é™¤å¯èƒ½ä¼šä¸ä»»ä½•å…¶ä»–æ“ä½œäº§ç”Ÿå†²çªã€‚</p>
<p><a target="_blank" rel="noopener" href="https://discuss.ocaml.org/t/is-it-safe-to-use-a-global-hash-table-in-an-ocaml-5-parallel-program/11144/1">æŸ¥çœ‹è®ºå›åŸå¸–</a></p>
<h2 id="è°ˆè°ˆä½ å¿ƒç›®ä¸­ç†æƒ³MLçš„æ ·å­å§ï¼"><a href="#è°ˆè°ˆä½ å¿ƒç›®ä¸­ç†æƒ³MLçš„æ ·å­å§ï¼" class="headerlink" title="è°ˆè°ˆä½ å¿ƒç›®ä¸­ç†æƒ³MLçš„æ ·å­å§ï¼"></a>è°ˆè°ˆä½ å¿ƒç›®ä¸­ç†æƒ³MLçš„æ ·å­å§ï¼</h2><ul>
<li>Haskellçš„ç±»å‹ç³»ç»Ÿå’Œç®€æ´ </li>
<li>OCamlçš„æ¨¡å—ç³»ç»Ÿå’Œå¯¹è±¡ç³»ç»Ÿ</li>
<li>Rustçš„low levelå†…å­˜æ§åˆ¶å’Œå€Ÿç”¨ä»¥åŠå¹¶å‘æ£€æŸ¥</li>
<li>Lispçš„å®ç³»ç»Ÿå’ŒREPL</li>
<li>JetBrainsç›¸å…³IDEæ”¯æŒ</li>
<li>å’Œx86_64æ±‡ç¼–ä¸€æ ·çš„ç¼–è¯‘é€Ÿåº¦</li>
</ul>
<p>æœ‰ç§è®¸æ„¿çš„ç¾ï¼ŒğŸ™</p>
<p><a target="_blank" rel="noopener" href="https://discuss.ocaml.org/t/whats-your-laundry-list-of-features-for-an-ideal-ml/10217/5">æŸ¥çœ‹è®ºå›ä¸Šå…¶ä»–æ„¿æœ›</a></p>
<h2 id="OOP-Visitorsåœ¨Polymorphicæƒ…å†µä¸‹çš„ç±»å‹é”™è¯¯"><a href="#OOP-Visitorsåœ¨Polymorphicæƒ…å†µä¸‹çš„ç±»å‹é”™è¯¯" class="headerlink" title="OOP Visitorsåœ¨Polymorphicæƒ…å†µä¸‹çš„ç±»å‹é”™è¯¯"></a>OOP Visitorsåœ¨Polymorphicæƒ…å†µä¸‹çš„ç±»å‹é”™è¯¯</h2><p>åƒJavaé‡Œé¢:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Tree</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> &lt;B&gt; B <span class="title function_">accept</span><span class="params">(TreeVisitor&lt;B&gt; v)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">TreeVisitor</span>&lt;B&gt; &#123;</span><br><span class="line">  <span class="keyword">public</span> B <span class="title function_">visitLeaf</span><span class="params">(Leaf t)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Leaf</span> <span class="keyword">implements</span> <span class="title class_">Tree</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">int</span> value;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">Leaf</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.value = value;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> &lt;B&gt; B <span class="title function_">accept</span><span class="params">(TreeVisitor&lt;B&gt; v)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> v.visitLeaf(<span class="built_in">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¦æ˜¯ç›´æ¥ç¿»è¯‘æˆOCaml:</p>
<figure class="highlight ocaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="keyword">virtual</span> tree =</span><br><span class="line">  <span class="keyword">object</span></span><br><span class="line">    <span class="keyword">method</span> <span class="keyword">virtual</span> accept : <span class="symbol">&#x27;a</span> . <span class="symbol">&#x27;a</span> tree_visitor -&gt; <span class="symbol">&#x27;a</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">and</span> <span class="keyword">virtual</span> [<span class="symbol">&#x27;a</span>] tree_visitor =</span><br><span class="line">  <span class="keyword">object</span></span><br><span class="line">    <span class="keyword">method</span> <span class="keyword">virtual</span> visit_leaf : (leaf -&gt; <span class="symbol">&#x27;a</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">and</span> leaf (i : <span class="built_in">int</span>) =</span><br><span class="line">  <span class="keyword">object</span> (self)</span><br><span class="line">    <span class="keyword">method</span> get = i</span><br><span class="line"></span><br><span class="line">    <span class="keyword">method</span> accept (v : <span class="symbol">&#x27;a</span> tree_visitor) : <span class="symbol">&#x27;a</span> =</span><br><span class="line">      v#visit_leaf (self :&gt; leaf)</span><br><span class="line">  <span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<p>æ˜¯ä¼šæŠ¥é”™æ»´:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">File &quot;visitor.ml&quot;, line 3, characters 28-54:</span><br><span class="line">3 |     method virtual accept : &#x27;a . &#x27;a tree_visitor -&gt; &#x27;a</span><br><span class="line">                                ^^^^^^^^^^^^^^^^^^^^^^^^^^</span><br><span class="line">Error: The universal type variable &#x27;a cannot be generalized:</span><br><span class="line">       it escapes its scope.</span><br></pre></td></tr></table></figure>

<p>OCamlçš„ç±»åœ¨å®šä¹‰æ—¶æ˜¯å•æ€çš„ï¼Œæ¯”å¦‚:</p>
<figure class="highlight ocaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> [<span class="symbol">&#x27;a</span>] c (x:<span class="symbol">&#x27;a</span>) = </span><br><span class="line">  <span class="keyword">object</span></span><br><span class="line">    <span class="keyword">method</span> x = x</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">and</span> d = </span><br><span class="line">  <span class="keyword">object</span></span><br><span class="line">    <span class="keyword">method</span> strange = (<span class="keyword">new</span> c <span class="number">0</span>)#x</span><br><span class="line">  <span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œ<code>c</code>æ˜¯:</p>
<figure class="highlight ocaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> [<span class="symbol">&#x27;a</span>] c : <span class="symbol">&#x27;a</span> -&gt; <span class="keyword">object</span> <span class="keyword">constraint</span> <span class="symbol">&#x27;a</span> = <span class="built_in">int</span> <span class="keyword">method</span> x : <span class="symbol">&#x27;a</span> <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>å› ä¸ºåœ¨dé‡Œé¢ <code>new c 0</code> å®šä¹‰äº†ä¸€ä¸ª <code>int c</code> çš„å¯¹è±¡ã€‚</p>
<p>æ‰€ä»¥æ­£ç¡®çš„å†™æ³•åº”è¯¥æ˜¯:</p>
<figure class="highlight ocaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="keyword">virtual</span> [<span class="symbol">&#x27;a</span>, <span class="symbol">&#x27;leaf</span>, <span class="symbol">&#x27;node</span>, <span class="symbol">&#x27;empty</span>] open_tree_visitor = </span><br><span class="line">  <span class="keyword">object</span></span><br><span class="line">    <span class="keyword">method</span> <span class="keyword">virtual</span> visit_leaf :  <span class="symbol">&#x27;leaf</span> -&gt; <span class="symbol">&#x27;a</span></span><br><span class="line">    <span class="keyword">method</span> <span class="keyword">virtual</span> visit_node :  <span class="symbol">&#x27;node</span> -&gt; <span class="symbol">&#x27;a</span></span><br><span class="line">    <span class="keyword">method</span> <span class="keyword">virtual</span> visit_empty :  <span class="symbol">&#x27;empty</span> -&gt; <span class="symbol">&#x27;a</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="keyword">virtual</span> tree = </span><br><span class="line">  <span class="keyword">object</span></span><br><span class="line">    <span class="keyword">method</span> <span class="keyword">virtual</span> accept : <span class="symbol">&#x27;a</span> .</span><br><span class="line">      (<span class="symbol">&#x27;a</span>, <span class="symbol">&#x27;leaf</span>, <span class="symbol">&#x27;node</span>, <span class="symbol">&#x27;empty</span>) open_tree_visitor -&gt; <span class="symbol">&#x27;a</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">and</span> leaf (i : <span class="built_in">int</span>) = </span><br><span class="line">  <span class="keyword">object</span> (self:<span class="symbol">&#x27;self</span>)</span><br><span class="line">    <span class="keyword">inherit</span> tree</span><br><span class="line">    <span class="keyword">method</span> get = i</span><br><span class="line">    <span class="keyword">method</span> accept v = v#visit_leaf (self :&gt; leaf)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">and</span> node (x : tree) (y: tree) = </span><br><span class="line">  <span class="keyword">object</span> (self:<span class="symbol">&#x27;self</span>)</span><br><span class="line">    <span class="keyword">inherit</span> tree</span><br><span class="line">    <span class="keyword">method</span> left = x</span><br><span class="line">    <span class="keyword">method</span> right = y</span><br><span class="line">    <span class="keyword">method</span> accept v = v#visit_node (self :&gt; node)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">and</span> empty = </span><br><span class="line">  <span class="keyword">object</span> (self:<span class="symbol">&#x27;self</span>)</span><br><span class="line">    <span class="keyword">inherit</span> tree</span><br><span class="line">    <span class="keyword">method</span> accept v = v#visit_empty (self :&gt; empty)</span><br><span class="line">  <span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://discuss.ocaml.org/t/type-errors-in-polymorphic-oop-visitors/12357">æŸ¥çœ‹è®ºå›åŸå¸–</a></p>
<h2 id="è¿›ä¸€æ­¥çº¦æŸæ¨¡å—çš„æ¥å£"><a href="#è¿›ä¸€æ­¥çº¦æŸæ¨¡å—çš„æ¥å£" class="headerlink" title="è¿›ä¸€æ­¥çº¦æŸæ¨¡å—çš„æ¥å£"></a>è¿›ä¸€æ­¥çº¦æŸæ¨¡å—çš„æ¥å£</h2><blockquote>
<p>åŸºäºduneï¼Œæœ‰ä¸€ä¸ªæ¨¡å—<code>A.ml</code>å®ƒçš„æ¥å£æ˜¯<code>A.mli</code>ï¼Œä½†æ˜¯å½“å®ƒåœ¨ä¸»æ¨¡å—ä¸­æ—¶ï¼Œæˆ‘æƒ³ä½¿ç”¨è¿›ä¸€æ­¥çº¦æŸè¿‡çš„çš„æ¥å£<code>A_sub.mli</code>ï¼Œå› ä¸ºåªæœ‰<code>A_Sub</code>çš„åŠŸèƒ½å¯¹ç”¨æˆ·æœ‰ç”¨ã€‚</p>
</blockquote>
<p>å…¶å®åœ¨libraryä¸‹é¢å£°æ˜ä¸€ä¸ªå’ŒlibraryåŒåçš„ <code>xxx.ml</code>ï¼Œåœ¨é‡Œé¢å†™ <code>module A = struct include A end</code> å°±å¯ä»¥å•¦ï¼Œå¾ˆå¸¸è§çš„åšæ³•ã€‚</p>
<p>è¯¦ç»†è®¨è®ºå¯ä»¥<a target="_blank" rel="noopener" href="https://discuss.ocaml.org/t/export-wrapped-modules-with-a-restricted-interface/12361">æŸ¥çœ‹è®ºå›åŸå¸–</a></p>
<h2 id="OCamlç¯ä¸ç¯ä¿ï¼Ÿ"><a href="#OCamlç¯ä¸ç¯ä¿ï¼Ÿ" class="headerlink" title="OCamlç¯ä¸ç¯ä¿ï¼Ÿ"></a>OCamlç¯ä¸ç¯ä¿ï¼Ÿ</h2><p><a target="_blank" rel="noopener" href="https://infra.ocaml.org/2023/05/30/emissions-monitoring.html">è¿™ç¯‡æ–‡ç« </a>è¯´é“ï¼Œå¯¹äºåœ¨ ocaml.org é›†ç¾¤ä¸­ç›‘æµ‹çš„19å°æœºå™¨ï¼Œ<br>æ¯å‘¨å¤§çº¦äº§ç”Ÿ70å…¬æ–¤çš„äºŒæ°§åŒ–ç¢³å½“é‡ï¼Œ </p>
<p>è‡ª ocaml.org é‡æ–°è®¾è®¡ä»¥æ¥ï¼Œ ç¤¾åŒºä¸€ç›´è‡´åŠ›äºå¯¹ç¯å¢ƒå½±å“è´Ÿè´£ã€‚ç¬¬ä¸€æ­¥æ˜¯é€šè¿‡è®¡ç®—ä½¿ç”¨çš„èƒ½æºæ€»é‡æ¥å‡†ç¡®é‡åŒ–å½±å“ï¼Œä¸ºäº†ç¡®å®šæœªæ¥æ‰€åšçš„ä»»ä½•æ”¹å–„æ˜¯å¦èƒ½å‡å°‘äºŒæ°§åŒ–ç¢³æ’æ”¾é‡ã€‚</p>
<p>ä¸ºæ­¤ï¼Œå¼€å‘äº†ä¸€ä¸ªç”¨äºè·å–å„ç§ç¢³å¼ºåº¦APIçš„HTTPå®¢æˆ·ç«¯: <a target="_blank" rel="noopener" href="https://github.com/geocaml/carbon-intensity">carbon-intensity</a></p>
<p>è‹±å›½ç‰¹å®šåœ°åŒºAPIçš„éå¸¸ç®€å•ï¼Œä½¿ç”¨åªéœ€è¦ç”¨æˆ·æä¾›Eioçš„ç½‘ç»œåŠŸèƒ½ï¼š</p>
<figure class="highlight ocaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># <span class="type">Eio_main</span>.run @@ <span class="keyword">fun</span> env -&gt;</span><br><span class="line">  <span class="type">Mirage_crypto_rng_eio</span>.run (<span class="keyword">module</span> <span class="type">Mirage_crypto_rng</span>.<span class="type">Fortuna</span>) env @@ <span class="keyword">fun</span> _ -&gt;</span><br><span class="line">  <span class="type">Carbon</span>.<span class="type">Gb</span>.get_intensity env#net</span><br><span class="line">  |&gt; <span class="type">Eio</span>.traceln <span class="string">&quot;%a&quot;</span> <span class="type">Carbon</span>.<span class="type">Gb</span>.<span class="type">Intensity</span>.pp;;</span><br><span class="line">+period: <span class="number">2022</span>-<span class="number">08</span>-<span class="number">28</span>T17:<span class="number">30</span>Z - <span class="number">2022</span>-<span class="number">08</span>-<span class="number">28</span>T18:<span class="number">00</span>Z</span><br><span class="line">+forecast: <span class="number">255</span> gCO2/kWh</span><br><span class="line">+actual: <span class="type">None</span></span><br><span class="line">+index: high</span><br><span class="line">+</span><br><span class="line">- : <span class="built_in">unit</span> = <span class="literal">()</span></span><br></pre></td></tr></table></figure>

<p>æŸäº›APIéœ€è¦æ›´å¤šé…ç½®ï¼Œä¾‹å¦‚æ³•å›½çš„éœ€è¦token:</p>
<figure class="highlight ocaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># <span class="type">Eio_main</span>.run @@ <span class="keyword">fun</span> env -&gt;</span><br><span class="line">  <span class="type">Mirage_crypto_rng_eio</span>.run (<span class="keyword">module</span> <span class="type">Mirage_crypto_rng</span>.<span class="type">Fortuna</span>) env @@ <span class="keyword">fun</span> _ -&gt;</span><br><span class="line">  <span class="keyword">let</span> token = <span class="type">Eio</span>.<span class="type">Path</span>.(load (env#fs / <span class="string">&quot;.co2-token&quot;</span>)) <span class="keyword">in</span></span><br><span class="line">  <span class="keyword">let</span> t = <span class="type">Carbon</span>.<span class="type">Co2_signal</span>.v token <span class="keyword">in</span></span><br><span class="line">  <span class="type">Carbon</span>.<span class="type">Co2_signal</span>.get_intensity ~net:env#net ~country_code:<span class="type">`FR</span> t</span><br><span class="line">  |&gt; <span class="type">Eio</span>.traceln <span class="string">&quot;%a&quot;</span> <span class="type">Carbon</span>.<span class="type">Co2_signal</span>.<span class="type">Intensity</span>.pp;;</span><br><span class="line">+country: <span class="type">FR</span></span><br><span class="line">+datetime: <span class="number">2022</span>-<span class="number">08</span>-<span class="number">29</span>T11:<span class="number">00</span>:<span class="number">00.000</span>Z</span><br><span class="line">+intensity: <span class="number">99</span> gCO2/kWh</span><br><span class="line">+fossil fuel percentage: <span class="number">15.230000</span></span><br><span class="line">- : <span class="built_in">unit</span> = <span class="literal">()</span></span><br></pre></td></tr></table></figure>

<p>æ›´è¯¦ç»†çš„å¯ä»¥çœ‹<a target="_blank" rel="noopener" href="https://discuss.ocaml.org/t/initial-emissions-monitoring-of-the-ocaml-org-infrastructure/12335">è®ºå›åŸå¸–</a>ï¼Œ ä»¥åŠè®ºå›ä¸Š<a target="_blank" rel="noopener" href="https://discuss.ocaml.org/t/ocaml-carbon-footprint/8580">å…³äºcarbon-intensityçš„å¸–å­</a></p>
<h2 id="float-of-intçš„ç»†èŠ‚"><a href="#float-of-intçš„ç»†èŠ‚" class="headerlink" title="float_of_intçš„ç»†èŠ‚"></a>float_of_intçš„ç»†èŠ‚</h2><p>è¯•å›¾å¼„æ¸…æ¥š <code>float_of_int</code> åœ¨amd64å’Œarm64ä¸Šçš„è¡Œä¸ºï¼Œ ç”Ÿæˆçš„ Cmm å¤§æ¦‚æ˜¯<br><code>box_float (Cop(Cfloatofint (untag_int myfloat)))</code></p>
<p>åœ¨ amd64 ä¸Šï¼Œå®ƒè¢«è½¬æ¢ä¸ºåºåˆ—:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ï¼ˆ** untag_int *ï¼‰</span><br><span class="line">sarq        $1, %rax</span><br><span class="line">cvtsi2sdq   %rax, %xmm0</span><br></pre></td></tr></table></figure>

<p>è€Œåœ¨arm64ä¸Šä½¿ç”¨scvtfå®ç°ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://discuss.ocaml.org/t/how-is-cfloatofint-translated/12342">è®ºå›åŸå¸–</a></p>
<h2 id="Debugging-Native-Code-in-OCamlï¼"><a href="#Debugging-Native-Code-in-OCamlï¼" class="headerlink" title="Debugging Native Code in OCamlï¼"></a>Debugging Native Code in OCamlï¼</h2><p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=OV19_FqAUCw">æœ¬è§†é¢‘</a>é€‚ç”¨äºï¼š</p>
<ul>
<li>é OCaml å¼€å‘äººå‘˜å¯¹ OCaml çš„å·¥ä½œåŸç†æ„Ÿåˆ°å¥½å¥‡</li>
<li>ä¸­çº§ OCaml å¼€å‘äººå‘˜</li>
</ul>
<p>æ›´å¤šè®¨è®ºå¯ä»¥çœ‹<a target="_blank" rel="noopener" href="https://discuss.ocaml.org/t/ann-debugging-native-code-in-second-ocaml-youtube-video/12315">è®ºå›åŸå¸–</a></p>
<h2 id="Outreachy-Summer-2023"><a href="#Outreachy-Summer-2023" class="headerlink" title="Outreachy Summer 2023"></a>Outreachy Summer 2023</h2><p>Outreachyæ˜¯ä¸€é¡¹å¸¦è–ªè¿œç¨‹å®ä¹ è®¡åˆ’ï¼Œç›®çš„æ˜¯ä¿ƒè¿›å¼€æºå’Œå¼€æ”¾ç§‘å­¦çš„å¤šæ ·æ€§ã€‚Outreachyçš„å®ä¹ æ˜¯ä¸ºé‚£äº›åœ¨æœ¬å›½()æŠ€æœ¯è¡Œä¸šé¢ä¸´ä»£è¡¨æ€§ä¸è¶³ã€æ­§è§†æˆ–ç³»ç»Ÿæ€§åè§çš„äººæä¾›çš„ã€‚</p>
<p>å…³äºä»Šå¹´Outreachyçš„ä¿¡æ¯å¯ä»¥çœ‹è¿™ä¸ªå¸–å­: <a target="_blank" rel="noopener" href="https://discuss.ocaml.org/t/outreachy-summer-2023/11159/2">Outreachy Summer 2023</a><br>å¦‚æœæƒ³åŠ å…¥ï¼Œå¯ä»¥çœ‹: <a target="_blank" rel="noopener" href="https://discuss.ocaml.org/t/become-an-outreachy-mentor-support-the-growth-and-diversity-of-the-ocaml-community/8213">Become an Outreachy Mentor: support the growth and diversity of the OCaml community</a></p>
<h2 id="ä¸€äº›ç”Ÿæ€"><a href="#ä¸€äº›ç”Ÿæ€" class="headerlink" title="ä¸€äº›ç”Ÿæ€"></a>ä¸€äº›ç”Ÿæ€</h2><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/c-cube/ocaml-minisat/">OCaml-Minisat github repo</a> minisatæ˜¯ä¸€ä¸ªå°å·§å¿«é€Ÿçš„SAT Solverï¼Œ è¿™æ˜¯å…¶OCaml Bining</li>
<li><a target="_blank" rel="noopener" href="https://github.com/ocaml/MPP-language-blender">MPP</a> å…¼å®¹OCaml5å’¯ï¼Œ mppå°±æ˜¯meta preprocesser</li>
<li><a target="_blank" rel="noopener" href="https://github.com/mjambon/caml2html">caml2html</a>å¯ä»¥å°†OCamlæºç æ–‡ä»¶è½¬æ¢æˆå¸¦é«˜äº®çš„HTML</li>
<li><a target="_blank" rel="noopener" href="https://github.com/c-cube/ocaml-containers/releases/tag/v3.12">containers</a> 3.12å‘å¸ƒäº†</li>
<li><a target="_blank" rel="noopener" href="https://github.com/ocaml-multicore/multicoretests">multicoretests</a>æ˜¯ç”¨äºæµ‹è¯•Multicore OCaml çš„ PBT æµ‹è¯•å¥—ä»¶å’Œåº“</li>
</ul>

</div> 

<script>
    window.onload = detectors();
</script>
    <div class="post-footer">
    <div class="h-line-primary"></div>
    <nav class="post-nav">
        <div class="prev-item">
           
        </div>
        <div class="next-item">
            
                <div class="icon arrow-right"></div>
                <div class="post-link">
                  <a href="/2023/06/10/%E4%BA%8C%E9%9B%B6%E4%BA%8C%E4%B8%89%E5%B9%B4%E5%85%AD%E6%9C%88%E5%8D%81%E6%97%A5/">Next</a>  
                </div>  
            
        </div>
    </nav>
</div>

    
      <div class="post-comment">

     

     
    
    

</div>
     
  
</article>
        </div>
      </div>
      
      <div class="footer">
    <div class="flex-container">
        <div class="footer-text">
            
            
                 | 
            
            
                å¸Œæœ›è·¯è¿‡çš„äººå¯ä»¥æ·»ç‚¹æŸ´ç«è®©è¿™é‡Œæš–å’Œç‚¹
                
        </div>
    </div>
</div>

    </div>

    
    

  </body>
</html>
